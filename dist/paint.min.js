!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("paint",[],t):"object"==typeof exports?exports.paint=t():e.paint=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return x[e]||f.default}function r(e){if("object"==(void 0===e?"undefined":u(e))&&(e=e.constuctor),"function"==typeof e&&"function"==typeof e.render)for(var t in x){var n=x[t];if(e==n)return t}}function a(e,t){return"function"==typeof t&&"function"==typeof t.render&&(x[e]=t,!0)}function s(){var e=[];for(var t in x)e.push(t);return e}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(10),f=o(c),l=n(12),d=o(l),p=n(13),h=o(p),v=n(14),m=o(v),b=n(15),g=o(b),y=n(16),A=o(y),x={defaultPen:f.default,linePen:d.default,ellipsePen:h.default,rectPen:m.default,textPen:g.default,eraser:A.default};t.default={get:i,key:r,set:a,keys:s}},function(e,t,n){"use strict";function o(){var e={};this.addEventListener=function(t,n){return void 0===e[t]&&(e[t]=[]),"function"==typeof n&&e[t].push(n),this},this.dispatchEvent=function(t,n){var o=e[t];if(o instanceof Array)for(var i=0,r=o.length;i<r;i+=1)"function"==typeof o[i]&&o[i](n);return this},this.removeEventListener=function(t,n){var o=e[t];if("string"==typeof t&&o instanceof Array)if("function"==typeof n){for(var i=0,r=o.length;i<r;i+=1)if(o[i]===n){e[t].splice(i,1);break}}else void 0===n&&delete e[t];return this}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function o(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft,right:t.right,bottom:t.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pens=t.Menu=t.Drawer=void 0,n(4);var i=n(9),r=o(i),a=n(0),s=o(a),u=n(18),c=o(u);t.Drawer=r.default,t.Menu=c.default,t.pens=s.default},function(e,t,n){var o=n(5);"string"==typeof o&&(o=[[e.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(7)(o,i);o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(6)(void 0),t.push([e.i,"/**\n * Created Date: 2017-10-16 09:27:09\n * Author: inu1255\n * E-Mail: 929909260@qq.com\n */\n.input-style {\n  width: 100%;\n  height: 38px;\n  padding: 6px 12px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.input-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.textarea-style {\n  line-height: 1.42857143;\n  width: 100%;\n  padding: 6px 12px;\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.textarea-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.select-style {\n  width: 100%;\n  height: 33px;\n  padding: 5px 12px;\n  background-color: #fff;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.select-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.hide {\n  opacity: 0;\n  pointer-events: none;\n}\n.show {\n  opacity: 1;\n  pointer-events: auto;\n}\n.painter-menu {\n  position: absolute;\n  background: #eee;\n  border: 1px solid #ccc;\n  max-width: 50%;\n}\n.painter-menu > .painter-menu__btn {\n  float: left;\n  margin: 5px 7px;\n  padding: 2px 5px;\n  color: #fff;\n  background: #1DA57A;\n  cursor: pointer;\n}\n.painter-menu > .painter-menu__btn:hover {\n  background: #048c61;\n}\n.painter-menu > .painter-menu__btn.selected {\n  background: #048c61;\n}\n.painter-menu > .painter-menu__btn:active,\n.painter-menu > .painter-menu__btn.active {\n  background: #007348;\n  -webkit-box-shadow: inset 0 0 20px 0 rgba(0, 0, 0, 0.1), 0 1px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: inset 0 0 20px 0 rgba(0, 0, 0, 0.1), 0 1px 0 rgba(0, 0, 0, 0.2);\n}\n.painter-menu > .painter-menu__btn:disabled {\n  background: #36be93;\n  opacity: .65;\n  cursor: not-allowed;\n}\n.painter-menu > .painter-menu__move {\n  margin: 5px 7px;\n  width: 24px;\n  height: 24px;\n  float: right;\n  border: 1px solid #ccc;\n  cursor: move;\n}\n.painter-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.painter-canvas__item {\n  position: absolute;\n}\n",""])},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=o(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function o(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=n(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=h[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(f(o.parts[r],t))}else{for(var a=[],r=0;r<o.parts.length;r++)a.push(f(o.parts[r],t));h[o.id]={id:o.id,refs:1,parts:a}}}}function i(e,t){for(var n=[],o={},i=0;i<e.length;i++){var r=e[i],a=t.base?r[0]+t.base:r[0],s=r[1],u=r[2],c=r[3],f={css:s,media:u,sourceMap:c};o[a]?o[a].parts.push(f):n.push(o[a]={id:a,parts:[f]})}return n}function r(e,t){var n=m(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=y[y.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=m(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),r(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),r(e,t),t}function c(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function f(e,t){var n,o,i,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var c=g++;n=b||(b=s(t)),o=l.bind(null,n,c,!1),i=l.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),o=p.bind(null,n,t),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),o=d.bind(null,n),i=function(){a(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}function l(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function d(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var o=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(o=A(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),m=function(e){var t={};return function(n){if(void 0===t[n]){var o=e.call(this,n);if(o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[n]=o}return t[n]}}(function(e){return document.querySelector(e)}),b=null,g=0,y=[],A=n(8);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return o(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],u=h[s.id];u.refs--,r.push(u)}if(e){o(i(e,t),t)}for(var a=0;a<r.length;a++){var u=r[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var r;return r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return"object"!=(void 0===e?"undefined":c(e))&&(e={}),{background:e.background,history:e.history||[],redo:e.redo||[],penClass:e.penClass||m,initStyle:e.initStyle||{fillStyle:"red",strokeStyle:"red"}}}function r(e,t,n){if("object"==(void 0===t?"undefined":c(t))){var o=p.default.get(t.key);o&&(e.save(),o.render(e.setStyle(t.style),s(t.data,n)),e.restore())}}function a(e,t){if(e instanceof TouchEvent){var n=(0,v.default)(e.target),o=Math.floor((e.touches[0].pageX-n.top)/t.width*1e4),i=Math.floor((e.touches[0].pageY-n.left)/t.height*1e4);return{offsetX:o,offsetY:i}}var o=Math.floor(e.offsetX/t.width*1e4),i=Math.floor(e.offsetY/t.height*1e4);return{offsetX:o,offsetY:i}}function s(e,t,n){if(e instanceof Array){for(var o=[],n=0;n<e.length;n++){var i=e[n];o.push(s(i,t,n))}return o}return"number"==typeof e?(1&n?t.height:t.width)*e/1e4:e}function u(e,t){function n(){return g}function o(e){var t=a(e,d);E({x:t.offsetX,y:t.offsetY}),e.preventDefault()}function u(e){t.penClass.outEnd||1!=e.buttons&&E(A,"mouseover"),A=!1}function c(e){var n=a(e,d);A={x:n.offsetX,y:n.offsetY},t.penClass.outEnd?E(A,"mouseout"):1==e.buttons&&w(n)}var f=this;l.default.call(this);var d=document.createElement("canvas");d.className="painter-canvas";var h=e;e instanceof HTMLImageElement&&(h=document.createElement("div"),Object.assign(h.style,e.style),e.parentElement.insertBefore(h,e),e.parentElement.removeChild(e),h.appendChild(e));var b=d.getContext("2d");t=i(t),b.initStyle={},b.setStyle(t.initStyle),b.initStyle=b.getStyle();var g,y=!1,A=!1,x=function(e){var t=a(e,d),o=n();y||(y={x:t.offsetX,y:t.offsetY}),"function"==typeof o.begin&&o.begin(y.x,y.y),e.preventDefault()},w=function(e){var o=a(e,d),i=n();!y&&1==e.buttons&&t.penClass.moveBegin&&(y={x:o.offsetX,y:o.offsetY,moveBegin:!0}),y&&("function"==typeof i.move&&i.move(y.x,y.y,o.offsetX,o.offsetY),e.preventDefault())},E=function(e,t){if(y){var o=n();"function"==typeof o.end&&o.end(y.x,y.y,e.x,e.y,t),y=!1}};d.addEventListener("mousedown",x),d.addEventListener("mousemove",w),d.addEventListener("mouseup",o),d.addEventListener("touchstart",x),d.addEventListener("touchmove",w),d.addEventListener("touchend",o),d.addEventListener("mouseover",u),d.addEventListener("mouseout",c);var M=function(e,t,n){return e&&(e.className="painter-canvas__item",null!=t&&(e.style.left=s(t,d)+"px"),null!=n&&(e.style.top=s(n,d,1)+"px"),h.appendChild(e)),h},C=function(){d.style.cursor=t.penClass.cursor||"auto",g=new t.penClass(f.setData,R,M)},R=function(e){C(),void 0!==e&&(t.history.push({key:p.default.key(t.penClass),data:e,style:b.getStyle()}),t.penData=void 0,t.redo.length=0,f.update())};this.setPen=function(e){E(A,"setPen"),void 0===e&&(e=m);var n=p.default.get(e);n?(t.penClass!=n&&(t.penClass=n,t.penData=void 0),C()):(console.log("不能识别的画笔"),console.log(e))},this.update=function(){this.resize(),b.clearRect(0,0,d.width,d.height),this.dispatchEvent("beforeupdate",b),t.background&&b.drawImage(t.background,0,0,d.width,d.height),t.history.forEach(function(e){r(b,e,d)}),void 0!==t.penData&&(b.save(),t.penClass.render(b,s(t.penData,d)),b.restore()),this.dispatchEvent("update",b)},this.setData=function(e){void 0!==e&&(t.penData=e,f.update())},this.stringify=function(){return JSON.stringify(t.history)},this.parse=function(e){if("string"==typeof e)t.history=JSON.parse(e);else{if(!(e instanceof Array))return;t.history=e}this.update()},this.undo=function(e){if(t.history.length>0){if(e)return!0;t.redo.push(t.history.pop()),this.update()}},this.redo=function(e){if(t.redo.length>0){if(e)return!0;t.history.push(t.redo.pop()),this.update()}},this.setColor=function(e){b.fillStyle=e,b.strokeStyle=e},this.getCanvas=function(){return d},this.resize=function(){var t=!1;e.offsetWidth!=d.width&&(t=!0,d.width=e.offsetWidth),e.offsetHeight!=d.height&&(t=!0,d.height=e.offsetHeight),t&&b.setStyle({})},this.toDataURL=function(){return d.toDataURL()},this.getCtx=function(){return b},this.offset=function(){return(0,v.default)(d)},this.disable=function(){d.style.pointerEvents="none"},this.enable=function(){d.style.pointerEvents="auto"},this.scale=function(t){e.style.transformOrigin="50% 0 0",e.style.transform="scale("+t+")",this.update()},C(),h.appendChild(d),"static"===getComputedStyle(h).position&&(h.style.position="relative"),this.resize()}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(1),l=o(f),d=n(0),p=o(d),h=n(2),v=o(h),m=p.default.get(),b=["fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"];CanvasRenderingContext2D.prototype.getStyle=function(){var e=this,t={};return b.forEach(function(n){e[n]!=e.initStyle[n]&&(t[n]=e[n])}),t},CanvasRenderingContext2D.prototype.setStyle=function(e){var t=this;return"object"!=(void 0===e?"undefined":c(e))?this:(b.forEach(function(n){null!=e[n]?t[n]=e[n]:t.initStyle[n]&&(t[n]=t.initStyle[n])}),this)},t.default=u},function(e,t,n){"use strict";function o(e,t){var n=[];this.begin=function(e,t){n.push(e),n.push(t)},this.move=function(t,o,i,r){n.push(i),n.push(r),e(n)},this.end=function(e,o,i,r){n.push(i),n.push(r),t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(i);o.moveBegin=!0,o.outEnd=!0,o.cursor="url("+r.default+"),pointer",o.render=function(e,t){if(t instanceof Array&&t.length>0){e.beginPath(),e.moveTo(t[0],t[1]);for(var n=2;n<t.length;n+=2)e.lineTo(t[n],t[n+1]);e.stroke()}},t.default=o},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozRjE4NkRCRkVCN0JFMDExODBERUJDM0QxRjY2MzNCMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMjMwQTJEMUEwMDMxMUU2QkE1MkQ5NEE3QjkyQzAyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMjMwQTJEMEEwMDMxMUU2QkE1MkQ5NEE3QjkyQzAyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YmRiMjkxMjItNDY1My00YjAyLWEzNmUtN2U4YjUwODFkZmFjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWY1YzI3YjEtZTg2ZC0xMTc5LTkyZGUtZjI2ZDAxNGI3YWE5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+u8AqPQAAASZQTFRFAAAABwcHCAgI1NTU1dXVwMDA1tbWT09PUVFRwsLC0tLS29vb8PDw9/f3SUlJsbGxwcHBVVVVVFRUPT096+vrFxcX7u7ura2t4uLiiYmJfHx8nJycHBwclpaW7Ozs5ubmKSkpWFhYZmZm5eXl+/v77e3tmJiYTExMnp6em5ub3NzczMzMLi4uJiYmS0tLqKio4ODgDw8PCwsLCgoKICAgpKSktra2Tk5OFhYWCQkJmZmZODg4EhISg4ODQkJCGBgYDg4OEBAQ09PT6urqISEh3d3dOzs7tbW1GhoaV1dXxMTEo6Ojvb29kJCQBQUFNjY20dHRPDw8X19faGhoeXl5w8PD+fn5DQ0NUFBQ0NDQW1tb+vr6c3NzRUVFHx8fbm5u2tra////AP/wNQAAAGJ0Uk5T/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAQVpKqAAABNUlEQVR42oTS5XLDMBAE4LXjuG0aZigzM1PKzMztvv9L1HbSSJacdn/YJ+m7G3nG4D8BR+4qL3+CKQA9r4XHpqATtcSPmgDLOez4Tqac1/tBEOA+FgadaqCwDqRmAkAv9uqLG2A+pIME6pvt7lUMWwPEsFudXVW9yxqWBjLuYxq/MW0VhLFETjYAjJACiAleHwsA01LAFzLwRZrhgS6oETM8wLgmjPPxNwn0m9CzWhSAIUM77zNRFIC2OuOB0Y2dbgHUGWFnK4KSBGjLos3dOcGoDOQZbj+fgc+8DGgZcn+rW5V9gLum6G/xyi0/oDXr6wcOFcBTbCdFP5BWQQT3Uj8wpILsUy4q+nEZUwHHMJdINz53kRqo/bn1lBkAmC1d5LzjlQoDgZP85vLH7VqMTYGcHwEGAC8r8nWFIZTXAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";function o(e,t){this.move=function(t,n,o,i){e([t,n,o,i])},this.end=function(e,n,o,i){t([e,n,o,i])}}Object.defineProperty(t,"__esModule",{value:!0}),o.moveBegin=!0,o.render=function(e,t){t&&4===t.length&&(e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.stroke())},t.default=o},function(e,t,n){"use strict";function o(e,t){this.move=function(t,n,o,i){e([t,n,o,i])},this.end=function(e,n,o,i){t([e,n,o,i])}}Object.defineProperty(t,"__esModule",{value:!0}),o.moveBegin=!0,o.render=function(e,t){if(t&&4===t.length){var n=(t[0]+t[2])/2,o=(t[1]+t[3])/2,i=(t[2]-t[0])/2,r=(t[3]-t[1])/2,a=i>r?i:r,s=i/a,u=r/a;e.scale(s,u),e.beginPath(),e.arc(n/s,o/u,a,0,2*Math.PI,!1),e.closePath(),e.stroke()}},t.default=o},function(e,t,n){"use strict";function o(e,t){this.move=function(t,n,o,i){e([t,n,o,i])},this.end=function(e,n,o,i){t([e,n,o,i])}}Object.defineProperty(t,"__esModule",{value:!0}),o.moveBegin=!0,o.render=function(e,t){t&&4===t.length&&(e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[0],t[3]),e.lineTo(t[0],t[1]),e.stroke())},t.default=o},function(e,t,n){"use strict";function o(e,t,n){this.move=function(t,n,o,i){e([t,n,o,i])},this.end=function(o,i,r,a){var s=document.createElement("textarea");s.addEventListener("blur",function(){t([o,i,r,a,s.value]);try{u.removeChild(s)}catch(e){}}),s.addEventListener("keyup",function(n){if(n.ctrlKey&&13==n.keyCode){t([o,i,r,a,s.value]);try{u.removeChild(s)}catch(e){}}else e([o,i,r,a,s.value])});var u=n(s,o,i);s.focus()}}Object.defineProperty(t,"__esModule",{value:!0}),o.font="16px serif",o.render=function(e,t){if(t&&t.length>=4){e.beginPath();var n=t[0],i=t[1],r=t[2],a=t[3],s=Math.atan((a-i)/(r-n));e.moveTo(n,i),e.lineTo(r,a),r>n?(e.lineTo(r-10*Math.cos(.5-s),a+10*Math.sin(.5-s)),e.lineTo(r-10*Math.cos(.5+s),a-10*Math.sin(.5+s))):(e.lineTo(r+10*Math.cos(.5-s),a-10*Math.sin(.5-s)),e.lineTo(r+10*Math.cos(.5+s),a+10*Math.sin(.5+s))),e.lineTo(r,a),e.stroke(),e.fill(),e.font=o.font;var u=t[4]||"",c=t[2],f=t[3],l=parseInt(o.font);t[3]>t[1]&&(f+=l),u.split("\n").forEach(function(t,n){e.fillText(t,c,f+n*l)})}},t.default=o},function(e,t,n){"use strict";function o(e,t){var n=[];this.begin=function(e,t,o,i){n.push(e),n.push(t)},this.move=function(t,o,i,r){n.push(i),n.push(r),e(n)},this.end=function(e,o,i,r){n.push(i),n.push(r),t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=function(e){return e&&e.__esModule?e:{default:e}}(i);o.cursor="url("+r.default+"),pointer",o.render=function(e,t){if(t instanceof Array&&t.length>0)for(var n=0;n<t.length;n+=2)e.save(),e.beginPath(),e.arc(t[n],t[n+1],5,0,2*Math.PI),e.clip(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},t.default=o},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAI3LAACNywG5aPW3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAADo0lEQVRYCcXWeahOaRzA8cslyxjZjbFdWS6Ff2zDxdiyk2wpW8wtS/lDylrzn5rRFIXsQvYl/lBkichSlJJkJ0s0lrKbhjHf79v76Nz33td7Ltf1q8895znnOc/yO8953puV9Z0jO2b/NalXH6/xIeYzJVatGy2dxX2sgoMptehBT9exB/m4ia0olUH0pKMb2IFaMLzmILYjXOO05KM3TdrRNqTOtgfXHNhO1EaJRx9avIUtSO08dNadE1/NbtQJF0vi2JdGbmMzamRo0MV5Da6PuhnqxrrdmVqmfROqx3oiKyuPelexF189iNk0cgX1UJzoQmWf24efivOgdctGHijD+Qu8ilyLc3qaSpPQDCtRrAmkDsCdMXqNYqw4Q60lGIrV+BmxItqZGdCXRBsemoHLaIo1qI+MER1AqPxfOIl5bE49U+8iNBOT0QBrk0cO8cJF+AT941VP1GrI3+NwT2gH9w1nPhEXcRDWSRvRDDhzG1gB94NM4YyXoxX8sbqEp3AjawEH4Sa1Do2QMcJn6MbiZvS5TLhP+HvwGL3wI3KQhx9guSV8HRdwGI1RKKIZcAE+x0wcwyoMQGpU4cIi+HtxBOfwEm0wAm+T5Z4cHej45HE9xxykjTncsTFnUBU+cBeDEKIiJ4vhXjEaFZCDIagEy23h4DxXZ/yG83BiTfApohkIF7M5cUMyE4fgmhiM8piPcdiPo/gHLjpn6xqynItfkueWO+EDfM7JrUGR+0TIgO8vhJlYjTvYCF/RDJSDC2sibNSJOPNRcKCWf0U/OCHrm8kpMKv5SERRGQj3PJqJWTiACbiH3XgPB+oXYBvO3v8NXP3O1nID5MCy9d0vusDBOJFCUVQGQiU785NzANNhFqrBaI1pqGCBcOZjUcYCMRxmwuMDLINZS4SjiROucgfozNzzXVCbYZhyX1UIF2oVfExecHGORDf4sz0Xr5GIuAOwsivfh214GKYmz52R33pXtMdSmHZnXBnvYFb2YB4+dc554n14NEyZCyakzmup4cM2YiYWwg3GDg1XvJkKz1t3DPKwC35Bb1Ag7DBELU58+CCcQbr4lxsn4Oy6oybsxBmew2AMhAsvHzuwAIU651qBcDBhIRW4kabgAP6Cr2QnfPd+ER2S5Uccve8aSBvRDNjQ52ae2oiZOAkH7SrPRUfY5iS4SH/HW3zTcOZ/wnXxDH/jD3g9Y0QzkLFymgq+61N4CAexAf5euPpLPTLtrIUG9D/ZlLcA+kExxQAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=document.createElement("div");t.className="painter-menu";var n=e.offset();t.style.top=n.top+"px",t.style.left=n.left+"px",document.body.appendChild(t),this.addButton=function(e,n){if(e&&n){var o=document.createElement("div");return o.className="painter-menu__btn",o.innerText=e,o.addEventListener("click",n),t.appendChild(o),o}},this.addPens=function(n){var o=this;return n=n||a.default.keys(),n.forEach(function(n){if(n){n.html||(n={html:n,key:n});var i=document.createElement("div");i.className="painter-menu__btn painter-menu__pen",i.innerHTML=n.html.replace(/pen$/i,""),i.addEventListener("click",function(){i.className+=" active",e.setPen(n.key),o.addPens.prev&&(o.addPens.prev.className=o.addPens.prev.className.replace(" active","")),o.addPens.prev=i}),t.appendChild(i),o.addPens.prev||(o.addPens.prev=i,i.className+=" active")}}),this},this.moveable=function(){var o=document.createElement("div");o.className="painter-menu__move";var i=new u.default(o,t).moveTo(n).start();return i.addEventListener("begin",function(){e.disable()}),i.addEventListener("end",function(){e.enable()}),t.appendChild(o),this},this.undo=function(){return this.addButton("撤销",function(){e.undo()}),this.addButton("重做",function(){e.redo()}),this},this.scale=function(){var t=1;return this.addButton("放大",function(){t*=1.1,e.scale(t)}),this.addButton("缩小",function(){t/=1.1,e.scale(t)}),this},this.color=function(t){var n=this;return t=t||[["red","红色"],["yellow","黄色"],["blue","蓝色"]],t.forEach(function(t){var o=n.addButton(t[1],function(){e.setColor(t[0]),o.className+=" active",n.color.prev&&(n.color.prev.className=n.color.prev.className.replace(" active","")),n.color.prev=o});o.style.color=t[0],n.color.prev||(n.color.prev=o,o.className+=" active")}),this},this.clear=function(){return this.addButton("清空",function(){e.parse([])}),this},this.restore=function(t){return this.restore.count++,this.addButton("恢复"+this.restore.count,function(){e.parse(t)}),this},this.restore.count=0,this.save=function(){var t=this;return this.addButton("保存",function(){t.restore(e.stringify()),e.parse([])}),this},this.disable=function(){return document.body.removeChild(t),this},this.enable=function(){return document.body.appendChild(t),this}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=o(r),s=n(19),u=o(s);document.body||document.documentElement;t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=this;u.default.call(this),t=t||e,this.state={end:(0,a.default)(t)},this.setBegin=function(e,t){this.state.begin={left:e,top:t}},this.warpEvent=function(e){return e.preventDefault(),e instanceof TouchEvent&&("touchend"===e.type?(e.pageX=e.changedTouches[0].pageX,e.pageY=e.changedTouches[0].pageY):(e.pageX=e.touches[0].pageX,e.pageY=e.touches[0].pageY)),e},this.getMoved=function(e,t){var n=this.state.begin,o=n.left,i=n.top;return o=e-o,i=t-i,o+=this.state.end.left||0,i+=this.state.end.top||0,this.state.move={left:o,top:i},this.state.move},this.begin=function(e){n.state.begin||(e=n.warpEvent(e),n.setBegin(e.pageX,e.pageY),n.dispatchEvent("begin"))},this.move=function(e){if(n.state.begin){e=n.warpEvent(e);var o=n.getMoved(e.pageX,e.pageY),i=o.left,r=o.top;t.style.left=i+"px",t.style.top=r+"px"}},this.end=function(e){if(n.state.begin){e=n.warpEvent(e);var t=n.getMoved(e.pageX,e.pageY),o=t.left,i=t.top;n.state.begin=!1,n.state.end={left:o,top:i},n.dispatchEvent("end",{left:o,top:i})}},this.moveTo=function(e){var o=e.left,i=e.top;return t.style.left=o+"px",t.style.top=i+"px",n.state.end={left:o,top:i},n},this.start=function(){return e.addEventListener("mousedown",this.begin),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.end),e.addEventListener("touchstart",this.begin),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.end),this},this.stop=function(){return e.removeEventListener("mousedown",this.begin),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),e.removeEventListener("touchstart",this.begin),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.end),this}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=o(r),s=n(1),u=o(s);t.default=i}])});