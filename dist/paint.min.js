!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("paint",[],t):"object"==typeof exports?exports.paint=t():e.paint=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return x[e]||f.default}function r(e){if("object"==(void 0===e?"undefined":u(e))&&(e=e.constuctor),"function"==typeof e&&"function"==typeof e.render)for(var t in x){var n=x[t];if(e==n)return t}}function a(e,t){return"function"==typeof t&&"function"==typeof t.render&&(x[e]=t,!0)}function s(){var e=[];for(var t in x)e.push(t);return e}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(10),f=i(c),l=n(12),d=i(l),p=n(13),h=i(p),v=n(14),m=i(v),b=n(15),g=i(b),y=n(16),A=i(y),x={defaultPen:f.default,linePen:d.default,ellipsePen:h.default,rectPen:m.default,textPen:g.default,eraser:A.default};t.default={get:o,key:r,set:a,keys:s}},function(e,t,n){"use strict";function i(){var e={};this.addEventListener=function(t,n){return void 0===e[t]&&(e[t]=[]),"function"==typeof n&&e[t].push(n),this},this.dispatchEvent=function(t,n){var i=e[t];if(i instanceof Array)for(var o=0,r=i.length;o<r;o+=1)"function"==typeof i[o]&&i[o](n);return this},this.removeEventListener=function(t,n){var i=e[t];if("string"==typeof t&&i instanceof Array)if("function"==typeof n){for(var o=0,r=i.length;o<r;o+=1)if(i[o]===n){e[t].splice(o,1);break}}else void 0===n&&delete e[t];return this}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft,right:t.right,bottom:t.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pens=t.Menu=t.Drawer=void 0,n(4);var o=n(9),r=i(o),a=n(0),s=i(a),u=n(18),c=i(u);t.Drawer=r.default,t.Menu=c.default,t.pens=s.default},function(e,t,n){var i=n(5);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0};o.transform=void 0;n(7)(i,o);i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(6)(void 0),t.push([e.i,"/**\n * Created Date: 2017-10-16 09:27:09\n * Author: inu1255\n * E-Mail: 929909260@qq.com\n */\n.input-style {\n  width: 100%;\n  height: 38px;\n  padding: 6px 12px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.input-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.textarea-style {\n  line-height: 1.42857143;\n  width: 100%;\n  padding: 6px 12px;\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n}\n.textarea-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.select-style {\n  width: 100%;\n  height: 33px;\n  padding: 5px 12px;\n  background-color: #fff;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  border-radius: 3px;\n  -webkit-transition: all 0.5s;\n  -o-transition: all 0.5s;\n  transition: all 0.5s;\n}\n.select-style:focus {\n  border-color: #1F90E6;\n  -webkit-box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n          box-shadow: 0 0 8px rgba(102, 175, 233, 0.6);\n}\n.hide {\n  opacity: 0;\n  pointer-events: none;\n}\n.show {\n  opacity: 1;\n  pointer-events: auto;\n}\n.painter-menu {\n  position: fixed;\n  background: #eee;\n  border: 1px solid #ccc;\n  max-width: 50%;\n}\n.painter-menu > .painter-menu__btn {\n  float: left;\n  margin: 5px 7px;\n  padding: 2px 5px;\n  color: #fff;\n  background: #1DA57A;\n  cursor: pointer;\n}\n.painter-menu > .painter-menu__btn:hover {\n  background: #048c61;\n}\n.painter-menu > .painter-menu__btn.selected {\n  background: #048c61;\n}\n.painter-menu > .painter-menu__btn:active,\n.painter-menu > .painter-menu__btn.active {\n  background: #007348;\n  -webkit-box-shadow: inset 0 0 20px 0 rgba(0, 0, 0, 0.1), 0 1px 0 rgba(0, 0, 0, 0.2);\n          box-shadow: inset 0 0 20px 0 rgba(0, 0, 0, 0.1), 0 1px 0 rgba(0, 0, 0, 0.2);\n}\n.painter-menu > .painter-menu__btn:disabled {\n  background: #36be93;\n  opacity: .65;\n  cursor: not-allowed;\n}\n.painter-menu > .painter-menu__move {\n  margin: 5px 7px;\n  width: 24px;\n  height: 24px;\n  float: right;\n  border: 1px solid #ccc;\n  cursor: move;\n}\n.painter-canvas {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.painter-canvas__item {\n  position: absolute;\n}\n",""])},function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=i(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=h[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(f(i.parts[r],t))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(f(i.parts[r],t));h[i.id]={id:i.id,refs:1,parts:a}}}}function o(e,t){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],a=t.base?r[0]+t.base:r[0],s=r[1],u=r[2],c=r[3],f={css:s,media:u,sourceMap:c};i[a]?i[a].parts.push(f):n.push(i[a]={id:a,parts:[f]})}return n}function r(e,t){var n=m(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=y[y.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=m(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,o)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",c(t,e.attrs),r(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",c(t,e.attrs),r(e,t),t}function c(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function f(e,t){var n,i,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var c=g++;n=b||(b=s(t)),i=l.bind(null,n,c,!1),o=l.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),i=p.bind(null,n,t),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=d.bind(null,n),o=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function d(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var i=n.css,o=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||r)&&(i=A(i)),o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),m=function(e){var t={};return function(n){if(void 0===t[n]){var i=e.call(this,n);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[n]=i}return t[n]}}(function(e){return document.querySelector(e)}),b=null,g=0,y=[],A=n(8);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=o(e,t);return i(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],u=h[s.id];u.refs--,r.push(u)}if(e){i(o(e,t),t)}for(var a=0;a<r.length;a++){var u=r[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o))return e;var r;return r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return"object"!=(void 0===e?"undefined":c(e))&&(e={}),{background:e.background,history:e.history||[],redo:e.redo||[],penClass:e.penClass||m,initStyle:e.initStyle||{fillStyle:"red",strokeStyle:"red"}}}function r(e,t,n){if("object"==(void 0===t?"undefined":c(t))){var i=p.default.get(t.key);i&&(e.save(),i.render(e.setStyle(t.style),s(t.data,n)),e.restore())}}function a(e,t){if(e instanceof TouchEvent){var n=(0,v.default)(e.target),i=Math.floor((e.touches[0].pageX-n.top)/t.width*1e4),o=Math.floor((e.touches[0].pageY-n.left)/t.height*1e4);return{offsetX:i,offsetY:o}}var i=Math.floor(e.offsetX/t.width*1e4),o=Math.floor(e.offsetY/t.height*1e4);return{offsetX:i,offsetY:o}}function s(e,t,n){if(e instanceof Array){for(var i=[],n=0;n<e.length;n++){var o=e[n];i.push(s(o,t,n))}return i}return"number"==typeof e?(1&n?t.height:t.width)*e/1e4:e}function u(e,t){function n(){return b}function i(e){var t=a(e,d);E({x:t.offsetX,y:t.offsetY}),e.preventDefault()}function u(e){t.penClass.outEnd||1!=e.buttons&&E(y,"mouseover"),y=!1}function c(e){y={x:e.offsetX,y:e.offsetY},t.penClass.outEnd?E(y,"mouseout"):1==e.buttons&&x(e)}var f=this;l.default.call(this);var d=document.createElement("canvas");d.className="painter-canvas";var h=d.getContext("2d");t=o(t),h.initStyle={},h.setStyle(t.initStyle),h.initStyle=h.getStyle();var b,g=!1,y=!1,A=function(e){var t=a(e,d),i=n();g||(g={x:t.offsetX,y:t.offsetY}),"function"==typeof i.begin&&i.begin(g.x,g.y),e.preventDefault()},x=function(e){var i=a(e,d),o=n();!g&&1==i.buttons&&t.penClass.moveBegin&&(g={x:i.offsetX,y:i.offsetY,moveBegin:!0}),g&&("function"==typeof o.move&&o.move(g.x,g.y,i.offsetX,i.offsetY),e.preventDefault())},E=function(e,t){if(g){var i=n();"function"==typeof i.end&&i.end(g.x,g.y,e.x,e.y,t),g=!1}};d.addEventListener("mousedown",A),d.addEventListener("mousemove",x),d.addEventListener("mouseup",i),d.addEventListener("touchstart",A),d.addEventListener("touchmove",x),d.addEventListener("touchend",i),d.addEventListener("mouseover",u),d.addEventListener("mouseout",c);var w=function(t,n,i){return t&&(t.className="painter-canvas__item",null!=n&&(t.style.left=s(n,d)+"px"),null!=i&&(t.style.top=s(i,d,1)+"px"),e.appendChild(t)),e},C=function(){d.style.cursor=t.penClass.cursor||"auto",b=new t.penClass(f.setData,M,w)},M=function(e){C(),void 0!==e&&(t.history.push({key:p.default.key(t.penClass),data:e,style:h.getStyle()}),t.penData=void 0,t.redo.length=0,f.update())};this.setPen=function(e){E(y,"setPen"),void 0===e&&(e=m);var n=p.default.get(e);n?(t.penClass!=n&&(t.penClass=n,t.penData=void 0),C()):(console.log("不能识别的画笔"),console.log(e))},this.update=function(){this.resize(),h.clearRect(0,0,d.width,d.height),this.dispatchEvent("beforeupdate",h),t.background&&h.drawImage(t.background,0,0,d.width,d.height),t.history.forEach(function(e){r(h,e,d)}),void 0!==t.penData&&(h.save(),t.penClass.render(h,s(t.penData,d)),h.restore()),this.dispatchEvent("update",h)},this.setData=function(e){void 0!==e&&(t.penData=e,f.update())},this.stringify=function(){return JSON.stringify(t.history)},this.parse=function(e){if("string"==typeof e)t.history=JSON.parse(e);else{if(!(e instanceof Array))return;t.history=e}this.update()},this.undo=function(e){if(t.history.length>0){if(e)return!0;t.redo.push(t.history.pop()),this.update()}},this.redo=function(e){if(t.redo.length>0){if(e)return!0;t.history.push(t.redo.pop()),this.update()}},this.setColor=function(e){h.fillStyle=e,h.strokeStyle=e},this.getCanvas=function(){return d},this.resize=function(){var t=!1;e.offsetWidth!=d.width&&(t=!0,d.width=e.offsetWidth),e.offsetHeight!=d.height&&(t=!0,d.height=e.offsetHeight),t&&h.setStyle({})},this.toDataURL=function(){return d.toDataURL()},this.getCtx=function(){return h},this.offset=function(){return(0,v.default)(d)},this.disable=function(){d.style.pointerEvents="none"},this.enable=function(){d.style.pointerEvents="auto"},this.scale=function(t){e.style.transformOrigin="50% 0 0",e.style.transform="scale("+t+")",this.update()},C(),e.appendChild(d),"static"===getComputedStyle(e).position&&(e.style.position="relative"),this.resize()}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=n(1),l=i(f),d=n(0),p=i(d),h=n(2),v=i(h),m=p.default.get(),b=["fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"];CanvasRenderingContext2D.prototype.getStyle=function(){var e=this,t={};return b.forEach(function(n){e[n]!=e.initStyle[n]&&(t[n]=e[n])}),t},CanvasRenderingContext2D.prototype.setStyle=function(e){var t=this;return"object"!=(void 0===e?"undefined":c(e))?this:(b.forEach(function(n){null!=e[n]?t[n]=e[n]:t.initStyle[n]&&(t[n]=t.initStyle[n])}),this)},t.default=u},function(e,t,n){"use strict";function i(e,t){var n=[];this.begin=function(e,t){n.push(e),n.push(t)},this.move=function(t,i,o,r){n.push(o),n.push(r),e(n)},this.end=function(e,i,o,r){n.push(o),n.push(r),t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=function(e){return e&&e.__esModule?e:{default:e}}(o);i.moveBegin=!0,i.outEnd=!0,i.cursor="url("+r.default+"),pointer",i.render=function(e,t){if(t instanceof Array&&t.length>0){e.beginPath(),e.moveTo(t[0],t[1]);for(var n=2;n<t.length;n+=2)e.lineTo(t[n],t[n+1]);e.stroke()}},t.default=i},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozRjE4NkRCRkVCN0JFMDExODBERUJDM0QxRjY2MzNCMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMjMwQTJEMUEwMDMxMUU2QkE1MkQ5NEE3QjkyQzAyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMjMwQTJEMEEwMDMxMUU2QkE1MkQ5NEE3QjkyQzAyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNS41IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YmRiMjkxMjItNDY1My00YjAyLWEzNmUtN2U4YjUwODFkZmFjIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWY1YzI3YjEtZTg2ZC0xMTc5LTkyZGUtZjI2ZDAxNGI3YWE5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+u8AqPQAAASZQTFRFAAAABwcHCAgI1NTU1dXVwMDA1tbWT09PUVFRwsLC0tLS29vb8PDw9/f3SUlJsbGxwcHBVVVVVFRUPT096+vrFxcX7u7ura2t4uLiiYmJfHx8nJycHBwclpaW7Ozs5ubmKSkpWFhYZmZm5eXl+/v77e3tmJiYTExMnp6em5ub3NzczMzMLi4uJiYmS0tLqKio4ODgDw8PCwsLCgoKICAgpKSktra2Tk5OFhYWCQkJmZmZODg4EhISg4ODQkJCGBgYDg4OEBAQ09PT6urqISEh3d3dOzs7tbW1GhoaV1dXxMTEo6Ojvb29kJCQBQUFNjY20dHRPDw8X19faGhoeXl5w8PD+fn5DQ0NUFBQ0NDQW1tb+vr6c3NzRUVFHx8fbm5u2tra////AP/wNQAAAGJ0Uk5T/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wAQVpKqAAABNUlEQVR42oTS5XLDMBAE4LXjuG0aZigzM1PKzMztvv9L1HbSSJacdn/YJ+m7G3nG4D8BR+4qL3+CKQA9r4XHpqATtcSPmgDLOez4Tqac1/tBEOA+FgadaqCwDqRmAkAv9uqLG2A+pIME6pvt7lUMWwPEsFudXVW9yxqWBjLuYxq/MW0VhLFETjYAjJACiAleHwsA01LAFzLwRZrhgS6oETM8wLgmjPPxNwn0m9CzWhSAIUM77zNRFIC2OuOB0Y2dbgHUGWFnK4KSBGjLos3dOcGoDOQZbj+fgc+8DGgZcn+rW5V9gLum6G/xyi0/oDXr6wcOFcBTbCdFP5BWQQT3Uj8wpILsUy4q+nEZUwHHMJdINz53kRqo/bn1lBkAmC1d5LzjlQoDgZP85vLH7VqMTYGcHwEGAC8r8nWFIZTXAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";function i(e,t){this.move=function(t,n,i,o){e([t,n,i,o])},this.end=function(e,n,i,o){t([e,n,i,o])}}Object.defineProperty(t,"__esModule",{value:!0}),i.moveBegin=!0,i.render=function(e,t){t&&4===t.length&&(e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.stroke())},t.default=i},function(e,t,n){"use strict";function i(e,t){this.move=function(t,n,i,o){e([t,n,i,o])},this.end=function(e,n,i,o){t([e,n,i,o])}}Object.defineProperty(t,"__esModule",{value:!0}),i.moveBegin=!0,i.render=function(e,t){if(t&&4===t.length){var n=(t[0]+t[2])/2,i=(t[1]+t[3])/2,o=(t[2]-t[0])/2,r=(t[3]-t[1])/2,a=o>r?o:r,s=o/a,u=r/a;e.scale(s,u),e.beginPath(),e.arc(n/s,i/u,a,0,2*Math.PI,!1),e.closePath(),e.stroke()}},t.default=i},function(e,t,n){"use strict";function i(e,t){this.move=function(t,n,i,o){e([t,n,i,o])},this.end=function(e,n,i,o){t([e,n,i,o])}}Object.defineProperty(t,"__esModule",{value:!0}),i.moveBegin=!0,i.render=function(e,t){t&&4===t.length&&(e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[0],t[3]),e.lineTo(t[0],t[1]),e.stroke())},t.default=i},function(e,t,n){"use strict";function i(e,t,n){this.move=function(t,n,i,o){e([t,n,i,o])},this.end=function(i,o,r,a){var s=document.createElement("textarea");s.addEventListener("blur",function(){t([i,o,r,a,s.value]);try{u.removeChild(s)}catch(e){}}),s.addEventListener("keyup",function(n){if(n.ctrlKey&&13==n.keyCode){t([i,o,r,a,s.value]);try{u.removeChild(s)}catch(e){}}else e([i,o,r,a,s.value])});var u=n(s,i,o);s.focus()}}Object.defineProperty(t,"__esModule",{value:!0}),i.font="16px serif",i.render=function(e,t){if(t&&t.length>=4){e.beginPath();var n=t[0],o=t[1],r=t[2],a=t[3],s=Math.atan((a-o)/(r-n));e.moveTo(n,o),e.lineTo(r,a),r>n?(e.lineTo(r-10*Math.cos(.5-s),a+10*Math.sin(.5-s)),e.lineTo(r-10*Math.cos(.5+s),a-10*Math.sin(.5+s))):(e.lineTo(r+10*Math.cos(.5-s),a-10*Math.sin(.5-s)),e.lineTo(r+10*Math.cos(.5+s),a+10*Math.sin(.5+s))),e.lineTo(r,a),e.stroke(),e.fill(),e.font=i.font;var u=t[4]||"",c=t[2],f=t[3],l=parseInt(i.font);t[3]>t[1]&&(f+=l),u.split("\n").forEach(function(t,n){e.fillText(t,c,f+n*l)})}},t.default=i},function(e,t,n){"use strict";function i(e,t){var n=[];this.begin=function(e,t,i,o){n.push(e),n.push(t)},this.move=function(t,i,o,r){n.push(o),n.push(r),e(n)},this.end=function(e,i,o,r){n.push(o),n.push(r),t(n)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=function(e){return e&&e.__esModule?e:{default:e}}(o);i.cursor="url("+r.default+"),pointer",i.render=function(e,t){if(t instanceof Array&&t.length>0)for(var n=0;n<t.length;n+=2)e.save(),e.beginPath(),e.arc(t[n],t[n+1],5,0,2*Math.PI),e.clip(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()},t.default=i},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAI3LAACNywG5aPW3AAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAADo0lEQVRYCcXWeahOaRzA8cslyxjZjbFdWS6Ff2zDxdiyk2wpW8wtS/lDylrzn5rRFIXsQvYl/lBkichSlJJkJ0s0lrKbhjHf79v76Nz33td7Ltf1q8895znnOc/yO8953puV9Z0jO2b/NalXH6/xIeYzJVatGy2dxX2sgoMptehBT9exB/m4ia0olUH0pKMb2IFaMLzmILYjXOO05KM3TdrRNqTOtgfXHNhO1EaJRx9avIUtSO08dNadE1/NbtQJF0vi2JdGbmMzamRo0MV5Da6PuhnqxrrdmVqmfROqx3oiKyuPelexF189iNk0cgX1UJzoQmWf24efivOgdctGHijD+Qu8ilyLc3qaSpPQDCtRrAmkDsCdMXqNYqw4Q60lGIrV+BmxItqZGdCXRBsemoHLaIo1qI+MER1AqPxfOIl5bE49U+8iNBOT0QBrk0cO8cJF+AT941VP1GrI3+NwT2gH9w1nPhEXcRDWSRvRDDhzG1gB94NM4YyXoxX8sbqEp3AjawEH4Sa1Do2QMcJn6MbiZvS5TLhP+HvwGL3wI3KQhx9guSV8HRdwGI1RKKIZcAE+x0wcwyoMQGpU4cIi+HtxBOfwEm0wAm+T5Z4cHej45HE9xxykjTncsTFnUBU+cBeDEKIiJ4vhXjEaFZCDIagEy23h4DxXZ/yG83BiTfApohkIF7M5cUMyE4fgmhiM8piPcdiPo/gHLjpn6xqynItfkueWO+EDfM7JrUGR+0TIgO8vhJlYjTvYCF/RDJSDC2sibNSJOPNRcKCWf0U/OCHrm8kpMKv5SERRGQj3PJqJWTiACbiH3XgPB+oXYBvO3v8NXP3O1nID5MCy9d0vusDBOJFCUVQGQiU785NzANNhFqrBaI1pqGCBcOZjUcYCMRxmwuMDLINZS4SjiROucgfozNzzXVCbYZhyX1UIF2oVfExecHGORDf4sz0Xr5GIuAOwsivfh214GKYmz52R33pXtMdSmHZnXBnvYFb2YB4+dc554n14NEyZCyakzmup4cM2YiYWwg3GDg1XvJkKz1t3DPKwC35Bb1Ag7DBELU58+CCcQbr4lxsn4Oy6oybsxBmew2AMhAsvHzuwAIU651qBcDBhIRW4kabgAP6Cr2QnfPd+ER2S5Uccve8aSBvRDNjQ52ae2oiZOAkH7SrPRUfY5iS4SH/HW3zTcOZ/wnXxDH/jD3g9Y0QzkLFymgq+61N4CAexAf5euPpLPTLtrIUG9D/ZlLcA+kExxQAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.createElement("div");t.className="painter-menu",t.style.position="fixed";var n=e.offset();t.style.top=n.top+"px",t.style.left=n.left+"px",document.body.appendChild(t),this.addPens=function(n){var i=this;return n=n||a.default.keys(),n.forEach(function(n){if(n){n.html||(n={html:n,key:n});var o=document.createElement("div");o.className="painter-menu__btn painter-menu__pen",o.innerHTML=n.html.replace(/pen$/i,""),o.addEventListener("click",function(){o.className+=" active",e.setPen(n.key),i.addPens.prev&&(i.addPens.prev.className=i.addPens.prev.className.replace(" active","")),i.addPens.prev=o}),t.appendChild(o),i.addPens.prev||(i.addPens.prev=o,o.className+=" active")}}),this},this.moveable=function(){var n=document.createElement("div");n.className="painter-menu__move";var i=new u.default(n,t).start();return i.addEventListener("begin",function(){e.disable()}),i.addEventListener("end",function(){e.enable()}),t.appendChild(n),this},this.undo=function(){var n=document.createElement("div");n.className="painter-menu__btn",n.innerText="撤销",n.addEventListener("click",function(){e.undo()}),t.appendChild(n);var n=document.createElement("div");return n.className="painter-menu__btn",n.innerText="重做",n.addEventListener("click",function(){e.redo()}),t.appendChild(n),this},this.scale=function(){var n=1,i=document.createElement("div");i.className="painter-menu__btn",i.innerText="放大",i.addEventListener("click",function(){n*=1.1,e.scale(n)}),t.appendChild(i);var i=document.createElement("div");return i.className="painter-menu__btn",i.innerText="缩小",i.addEventListener("click",function(){n/=1.1,e.scale(n)}),t.appendChild(i),this},this.color=function(){var n=document.createElement("div");n.className="painter-menu__btn",n.style.color="red",n.innerText="红色",n.addEventListener("click",function(){e.setColor("red")}),t.appendChild(n);var n=document.createElement("div");n.className="painter-menu__btn",n.style.color="yellow",n.innerText="黄色",n.addEventListener("click",function(){e.setColor("yellow")}),t.appendChild(n);var n=document.createElement("div");return n.className="painter-menu__btn",n.style.color="blue",n.innerText="蓝色",n.addEventListener("click",function(){e.setColor("blue")}),t.appendChild(n),this},this.clear=function(){var n=document.createElement("div");return n.className="painter-menu__btn",n.innerText="清空",n.addEventListener("click",function(){e.parse([])}),t.appendChild(n),this},this.restore=function(n){this.restore.count++;var i=document.createElement("div");return i.className="painter-menu__btn",i.innerText="恢复"+this.restore.count,i.addEventListener("click",function(){e.parse(n)}),t.appendChild(i),this},this.restore.count=0,this.save=function(){var n=this,i=document.createElement("div");return i.className="painter-menu__btn",i.innerText="保存",i.addEventListener("click",function(){n.restore(e.stringify()),e.parse([])}),t.appendChild(i),this}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=i(r),s=n(19),u=i(s);document.body||document.documentElement;t.default=o},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=this;u.default.call(this),t=t||e,this.state={end:(0,a.default)(t)},this.setBegin=function(e,t){this.state.begin={left:e,top:t}},this.warpEvent=function(e){return e.preventDefault(),e instanceof TouchEvent&&("touchend"===e.type?(e.pageX=e.changedTouches[0].pageX,e.pageY=e.changedTouches[0].pageY):(e.pageX=e.touches[0].pageX,e.pageY=e.touches[0].pageY)),e},this.getMoved=function(e,t){var n=this.state.begin,i=n.left,o=n.top;return i=e-i,o=t-o,i+=this.state.end.left||0,o+=this.state.end.top||0,this.state.move={left:i,top:o},this.state.move},this.begin=function(e){n.state.begin||(e=n.warpEvent(e),n.setBegin(e.pageX,e.pageY),n.dispatchEvent("begin"))},this.move=function(e){if(n.state.begin){e=n.warpEvent(e);var i=n.getMoved(e.pageX,e.pageY),o=i.left,r=i.top;t.style.left=o+"px",t.style.top=r+"px"}},this.end=function(e){if(n.state.begin){e=n.warpEvent(e);var t=n.getMoved(e.pageX,e.pageY),i=t.left,o=t.top;n.state.begin=!1,n.state.end={left:i,top:o},n.dispatchEvent("end",{left:i,top:o})}},this.start=function(){return e.addEventListener("mousedown",this.begin),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.end),e.addEventListener("touchstart",this.begin),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.end),this},this.stop=function(){return e.removeEventListener("mousedown",this.begin),document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),e.removeEventListener("touchstart",this.begin),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.end),this}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=i(r),s=n(1),u=i(s);t.default=o}])});